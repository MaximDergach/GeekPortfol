<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>DZ-3</title>
	<style>
	form{margin:30px;}
	fieldset{width:265px;}
	label{padding-right:10px;}
</style>
</head>
<body>

	<form action="" method="post" onsubmit="valid(this)">

		<fieldset>
			<legend>Моя форма</legend>	
			<p>
				<label for="name_form">Имя</label> 
				<input type="text" name="name" id="name_form"  class="inp">
			</p>
			<p>
				<label for="phone_form">Телефон</label>
				<input type="text" name="phone" id="phone_form" class="inp">
			</p>
			<p>
				<label for="email_form">E-mail</label>
				<input type="email" name="email" id="email_form" class="inp">
			</p>
			<p>
				<textarea name="t_area" id="t_area" cols="30" rows="10" id="t_area" ></textarea>
			</p>

			<input type="button" value="Отправить" id="btn" name="submit"> 
			<input type="reset" value="Сброс">
		</fieldset>

	</form>

	<script>

		function CheckForm(){
			this.input = document.querySelectorAll('input');
			this.btnReset = document.getElementById('reset');

			this.pattern_name = /[а-яёА-ЯЁ\s]+$/g; 
			this.pattern_phone = /(\+\d[(](\d{3})[)](\d{3})-(\d{4}))$/g;
			this.pattern_email = /^[a-z0-9](([_\-\.]?[a-z0-9]+)*)@([a-z0-9]+)(([_\.\-]?[a-z0-9]+)*)\.[a-z]+$/gi;
			this.pattern = [this.pattern_name, this.pattern_phone, this.pattern_email];//массив паттернов
		}

		CheckForm.prototype.loop = function() {			
			var loop = this;

			this.input.forEach(function(item, i){//перебор массива input
					var id = item.id;
					item.onkeyup = function() {
						loop.nameCheck(id, loop.pattern[i]);
				};
			});
		};

		CheckForm.prototype.nameCheck = function (id, pattern) {
			var input = document.getElementById(id);

			if(input.value.search(pattern) != -1){
				this.changeBorder(1, input);
			}else{
				this.changeBorder(0, input);
			};
		};

		CheckForm.prototype.changeBorder = function(error, input) {
			if(error != 1) {
				input.style.border = "2px solid red";
			} else {
				input.style.border = "2px solid green";
			}

		};

		var checkForm = new CheckForm();
		checkForm.loop();

		
		// function valid(form){

		// 	var name = form.name.value;
		// 	var phone = form.phone.value;
		// 	var email = form.email.value;
		// 	var t_area = form.t_area.value;
		// 	var pattern_name = /[а-яёА-ЯЁ\s]+$/g; 
		// 	var pattern_phone = /\+\d[(](\d{3})[)](\d{3})-(\d{4})/g;
		// 	var pattern_email = /^[a-z0-9](([_\-\.]?[a-z0-9]+)*)@([a-z0-9]+)(([_\.\-]?[a-z0-9]+)*)\.[a-z]+$/gi;
		// 	var pattern_t_area = /[^\<\>\[\]%'`]+$/g;
		// 	var fals = false;

		// 	if (pattern_name.test(name) == false || name == '') {
		// 		fals = 'Не те символы или буквы'

		// 	} else if(pattern_phone.test(phone) == false || phone == '') {
		// 		fals = 'Номер не подходит'

		// 	} else if(pattern_email.test(email) == false || email == '') {
		// 		fals = 'Почта указана не коректна'

		// 	}else if (pattern_t_area.test(t_area) == false || t_area == '') {
		// 		fals = 'Поле с сообщением пуста'

		// 	}else {

		// 	}
		// 	if (fals) {
		// 		colorBord(this)
		// 		//return alert(fals)
		// 	}
		// }
		// var  colorBord= function() {
		// 	document.getElementById("name_form").style.border="2px solid #FF0000"
		// } 
		
	/*var inp = document.querySelectorAll('.inp')
	var name_form = document.getElementById('name_form')
	var phone_form = document.getElementById('phone_form') 
	var email_form = document.getElementById('email_form') 
	var forma = document.getElementById('forma') 
	var btn = document.getElementById('btn') 
	console.log(inp)*/

	
	///[а-яёА-Я\s]+$/g для текста
	// ^[a-zA-Z0-9](([_\-\.]?[a-zA-Z0-9]+)*)@([a-zA-Z0-9]+)(([_\.\-]?[a-zA-z0-9]+)*)\.[a-zA-Z]+$
	//   для почты
	// \+\d[(](\d{3})[)](\d{3})-(\d{4}) номер телефона (+7(000)000-0000)


</script>
</body>
</html> 	 	 	